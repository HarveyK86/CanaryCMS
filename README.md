# CanaryCMS
## Introduction
CanaryCMS is the latest incarnation of Canary using Python, HTML, CSS and Javascript. It is intended to be a tool that, via the Django admin GUI, can be used to build websites. It comes complete with a fixture of test data generated by the CanaryData project.

### Server side;
  * Django
  * htmlmin
  * jsmin
  * csscompressor

### Client side;
  * RequireJS
  * jQuery
  * Underscore.js
  * Bootstrap
  * Font Awesome

## Setup
### C9 Setup
1. `sudo apt install python3.5-venv`
2. `python3.5 -mvenv venv`
3. `source venv/bin/activate`
4. `pip install --upgrade pip`
5. `sudo -H pip install -r venv-requirements.txt`
6. `export SECRET_KEY="$(openssl passwd -1 <your password here>)"`
7. `python CanaryCMS/manage.py migrate`
8. `python CanaryCMS/manage.py createsuperuser`
9. `python CanaryCMS/manage.py loaddata standard`
10. `python CanaryCMS/manage.py runserver 0.0.0.0:8080`

### C9 Run
1. `source venv/bin/activate`
2. `export SECRET_KEY="$(openssl passwd -1 <your password here>)"`
3. `python CanaryCMS/manage.py runserver 0.0.0.0:8080`

### PythonAnywhere Setup
1. `git clone https://github.com/HarveyK86/CanaryCMS.git`
2. `cd CanaryCMS/`
3. `mkvirtualenv venv --python=/usr/bin/python3.5`
4. `workon venv`
5. `pip install --upgrade pip`
6. `pip install -r venv-requirments.txt`

### PythonAnyhere WSGI File
```
import os
import sys

path = '/home/HarveyK86/CanaryCMS/CanaryCMS'
if path not in sys.path:
    sys.path.append(path)

os.environ['DJANGO_SETTINGS_MODULE'] = 'CanaryCMS.settings'
os.environ['SECRET_KEY'] = '<escaped output of 'openssl passwd -1 <your password here>' here>'

from django.core.wsgi import get_wsgi_application
from django.contrib.staticfiles.handlers import StaticFilesHandler
application = StaticFilesHandler(get_wsgi_application())
```

## Useful Commands
* `pip freeze > venv-requirements.txt`
* `sudo rm-rf venv`
* `python CanaryCMS/manage.py dumpdata --format=json core > CanaryCMS/public/fixtures/standard.json`
* `python CanaryCMS/manage.py makemigrations core`
* `python CanaryCMS/manage.py migrate core`
